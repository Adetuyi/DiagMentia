<!DOCTYPE html>
<html>
  <head>
    <title>Dementia Expert System</title>
    <style>
      /* CSS styles */
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
        background-color: #f0f0f0;
      }

      h1 {
        color: #333;
        text-align: center;
        margin-bottom: 20px;
      }

      label {
        font-weight: bold;
        color: #555;
      }

      input[type="number"],
      input[type="checkbox"] {
        width: 100px;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 4px;
      }

      button {
        margin-top: 10px;
        padding: 10px 20px;
        background-color: #4caf50;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
      }

      button:hover {
        background-color: #45a049;
      }

      .result {
        margin-top: 20px;
        font-weight: bold;
        background-color: #fff;
        border: 1px solid #ccc;
        border-radius: 4px;
        padding: 10px;
      }

      ul {
        list-style-type: none;
        padding: 0;
      }

      li {
        margin-bottom: 5px;
      }
    </style>
  </head>
  <body>
    <h1>Dementia Expert System</h1>

    <label for="mmse-score">MMSE Score:</label>
    <input type="number" id="mmse-score" min="0" max="30" required />

    <br />

    <label for="cdr-score">CDR Score:</label>
    <input type="number" id="cdr-score" min="0" max="3" required />

    <br />

    <h3>Emotional and Psychological Symptoms:</h3>

    <label for="memory-loss">Memory Loss:</label>
    <input type="checkbox" id="memory-loss" />

    <br />

    <label for="confusion">Confusion:</label>
    <input type="checkbox" id="confusion" />

    <br />

    <label for="depression">Depression:</label>
    <input type="checkbox" id="depression" />

    <br />

    <label for="agitation">Agitation:</label>
    <input type="checkbox" id="agitation" />

    <br />

    <label for="hallucinations">Hallucinations:</label>
    <input type="checkbox" id="hallucinations" />

    <br />

    <button onclick="diagnose()">Diagnose</button>

    <div id="result" class="result"></div>

    <script>
      // JavaScript code
      function diagnose() {
        const mmseScore = parseFloat(
          document.getElementById("mmse-score").value
        );
        const cdrScore = parseFloat(document.getElementById("cdr-score").value);

        // Validate MMSE score
        if (mmseScore < 0 || mmseScore > 30) {
          alert("Invalid input. MMSE score should be between 0 and 30.");
          return;
        }

        // Validate CDR score
        if (cdrScore < 0 || cdrScore > 3) {
          alert("Invalid input. CDR score should be between 0 and 3.");
          return;
        }

        // Retrieve symptom values
        const symptoms = {
          "Memory Loss": document.getElementById("memory-loss").checked,
          Confusion: document.getElementById("confusion").checked,
          Depression: document.getElementById("depression").checked,
          Agitation: document.getElementById("agitation").checked,
          Hallucinations: document.getElementById("hallucinations").checked,
        };

        // Prepare data to send to the backend
        const data = {
          mmseScore,
          cdrScore,
          symptoms,
        };

        console.log(data);

        // Send data to the backend for diagnosis
        fetch("http://127.0.0.1:5000/diagnose", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(data),
        })
          .then((response) => response.json())
          .then((response) => {
            displayResult(
              response.diagnosis,
              response.dementiaRange,
              response.positiveSymptoms
            );
          })
          .catch((error) => {
            console.error(error);
          });
      }

      function displayResult(diagnosis, dementiaRange, positiveSymptoms) {
        const resultElement = document.getElementById("result");
        resultElement.innerHTML = "";

        const diagnosisText = document.createElement("p");
        diagnosisText.textContent = "Diagnosis: " + diagnosis;
        resultElement.appendChild(diagnosisText);

        const dementiaRangeText = document.createElement("p");
        dementiaRangeText.textContent = "Dementia Range: " + dementiaRange;
        resultElement.appendChild(dementiaRangeText);

        if (positiveSymptoms.length > 0) {
          const positiveSymptomsTitle = document.createElement("p");
          positiveSymptomsTitle.textContent = "Positive Symptoms:";
          resultElement.appendChild(positiveSymptomsTitle);

          const positiveSymptomsList = document.createElement("ul");
          positiveSymptoms.forEach((symptom) => {
            const symptomItem = document.createElement("li");
            symptomItem.textContent = symptom;
            positiveSymptomsList.appendChild(symptomItem);
          });
          resultElement.appendChild(positiveSymptomsList);
        } else {
          const noSymptomsText = document.createElement("p");
          noSymptomsText.textContent = "No positive symptoms reported.";
          resultElement.appendChild(noSymptomsText);
        }
      }
    </script>
  </body>
</html>
